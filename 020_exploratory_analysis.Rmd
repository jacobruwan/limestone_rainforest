---
title: "model_development"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


```{r load_datasets_exploratory_analysis}
# This code should be removed when entire process is productionised
dropbox <- "C:\\Users\\Jacob\\Dropbox\\Semester 2 2017\\MXB344\\Project\\Data\\"

load(paste0(dropbox, "domseedlingcover_rq1.RData"))
load(paste0(dropbox, "domshannons_rq1.RData"))
load(paste0(dropbox, "domsla_rq1.RData"))
load(paste0(dropbox, "species_richness_rq3.RData"))
load(paste0(dropbox, "hobo_rq2.RData"))
```

This section provides an insight to the trends in the collected data. This analysis will be focused on individual research questions. This will provide interpretability when developing the statistical model.

## Research Question 1: Dominant Species Seedling Cover
```{r}
domseedlingcover_rq1.df

```

### Site vs Dominant Seedling Cover
In the figure below, we observe:

  * a slighty larger variance for domiannt species 1 and 2 in pristine sites.
  * higher IQR and medians for dominant species 1 and 2 in pristine sites
  * domiant species 3 is less evident in pristine sites
  * the coverage dominant species 4 is insignificant in comparison to the other 3
  
```{r}
domseedlingcover_rq1.df %>%
  select(dom_species_id, site, dom_seedling_cover, transect, quadrat) %>%
  distinct() %>%
  filter(!is.na(dom_species_id)) %>%
  ggplot(aes(x = factor(dom_species_id), y = dom_seedling_cover, col = site)) +
  geom_boxplot() +
  theme_project() +
  scale_colour_tableau() +
  ggtitle("Dominant Seedling Cover vs Site")

```




## Research Question 1: Dominant Species Shannons index of Diversity
```{r}
domshannons_rq1.df %>% str()
```

```{r}
domshannons_rq1.df %>%
  ggplot(aes(x = paste0(site,transect), y = dom_shannon)) +
  geom_point() +
  theme_project() +
  scale_colour_tableau() +
  ggtitle("Dominant Shannons Index vs Site")


```


  * overall
  * differ between individuals
  * Rao Tao (quadratic entropy)
  * Shannon
    * Diversty contrained by dominant
    * Try and group by a specific species? Use just P*log(p)
  * Just look at a the 'shannons for each species (3), for each site (so 6 in total, transect could make it 18.. but cant model it)
  



## Research Question 1: Dominant Species Specific Leaf Area
```{r}
dataq3 <- domsla_rq1.df
```

  * leaf area - photosynthetic aparatus of the plant
  * amount of investment of dry matter (plant investment into growth defence trade off) -> Most dominant species most compettitive, higher specific leaf area


```{r}
dataq3 %>%
  ggplot(aes(x=factor(dom_species_id), y = dom_sla, col=site)) +
  geom_boxplot() +
  theme_project() +
  scale_colour_tableau() +
  ggtitle("SLA vs Site and Dominant Species ID")

```


# Data
```{r}
# Use the choose files function to get the location of the datasets on your computer
choose.files()

# Should get an output like:
# "C:\\Users\\Jacob\Project\\Data\\biotic_leaftraits.RData"

# Copy the folder spot below, and copy the """".RData file into the load function below

location <- "C:\\Users\\Jacob\\Dropbox\\Semester 2 2017\\MXB344\\Project\\Data\\"

# Load the datasets
load(paste0(location, "biotic_leaftraits.RData"))
load(paste0(location, "abiotic_filterpaper.RData"))
load(paste0(location, "abiotic_canopycover.RData"))
load(paste0(location, "abiotic_penetrometer.RData"))

```

## Abiotic
```{r}
# Decopmosition
ggplot(aes(x=site, y=decomposition),
       data = abiotic_filterpaper.df) + 
  geom_boxplot() +
  ggtitle("Abiotic Comparison") 

# LAI
ggplot(aes(x=site, y=lai, col = site),
       data = abiotic_canopycover.df) + 
  geom_boxplot() +
  ggtitle("Abiotic Comparison") 

# Gap fResction THreshold
ggplot(aes(x=site, y=gft, col = site),
       data = abiotic_canopycover.df) + 
  geom_boxplot() +
  ggtitle("Abiotic Comparison") 

# Compaction
ggplot(aes(x=site, y=compaction, col = site),
       data = abiotic_penetrometer.df) + 
  geom_boxplot() +
  ggtitle("Abiotic Comparison") 

```

## Leaf Traits
```{r}
count_data <- biotic_leaftraits.df %>%
  filter(species_presence == 1) %>%
  group_by(site, apex_shape) %>% # CHANGE LEAF TRAIT
  summarise(number_observations = n())

# CHANGE THE X VARIABLE LEAF TRAIT TO THE ONE ABOVE
ggplot(aes(x=apex_shape, y=number_observations, fill = site),
       data = count_data) + 
  geom_bar(stat = "identity", position = "dodge") +
  coord_flip() +
  ggtitle("Leaf Trait Comparison") 

```




